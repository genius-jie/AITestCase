# DDT测试数据生成流程分析与提示词优化建议

## 一、实践流程回顾

### 1.1 初始需求
- 用户要求生成50条测试用例
- 严格遵循数据契约文档
- 去除多余字段
- 确保文本自然性、情绪一致性、意图一致性、模态一致性
- 覆盖正向、反向、边界、异常场景

### 1.2 执行步骤
1. **读取数据契约文档**：确认字段定义、枚举值、业务规则
2. **读取DDT提示词**：理解测试数据设计原则和约束
3. **手动设计测试用例**：根据提示词要求，手动设计50条测试数据
4. **创建CSV文件**：按照数据契约的格式要求生成文件
5. **验证文件格式**：使用Python脚本验证CSV格式正确性
6. **创建设计说明文档**：记录测试用例分类、覆盖统计、设计原则

### 1.3 执行结果
✅ 成功生成50条测试用例
✅ 所有字段符合数据契约要求（10个字段）
✅ 文本内容自然、符合真实对话习惯
✅ 情绪、意图、模态一致性良好
✅ 覆盖所有意图类型（CHAT, SEARCH, MEMORY, RECOMMEND）
✅ 覆盖所有情绪类型（平淡, 疑问, 开心, 愤怒, 悲伤, 关切, 惊奇, 厌恶）
✅ 覆盖所有模态类型（VISION, NON_VISION）
✅ 包含正向、反向、鲁棒性场景

## 二、提示词有效性评估

### 2.1 有效的方面 ✅

#### 2.1.1 核心目标明确
- ✅ 全维度覆盖要求清晰
- ✅ 业务逻辑驱动原则明确
- ✅ 标准化交付要求具体
- ✅ 真实对话模拟要求强烈

#### 2.1.2 规则约束完善
- ✅ 严禁使用Python脚本程序化生成text字段
- ✅ 必须手动设计符合真实人类说话习惯的对话内容
- ✅ 必须保证字段间的逻辑一致性
- ✅ 必须使用|作为CSV分隔符
- ✅ 必须确保用户输入字段的多元化和覆盖性

#### 2.1.3 领域知识详细
- ✅ 用户输入字段设计原则详细
- ✅ 语气一致性要求明确
- ✅ 内容真实性要求具体
- ✅ 话题多样性、人群多样性、场景多样性要求全面
- ✅ 表达方式多样性要求丰富

#### 2.1.4 迭代机制健全
- ✅ 错题本机制明确
- ✅ 提示词自迭代机制清晰
- ✅ 错误记录格式规范

### 2.2 存在的问题 ❌

#### 2.2.1 文件管理规则矛盾 ⚠️
**问题1**: 提示词中存在矛盾的要求
- 规则1: "必须直接在原CSV文件上进行修改，严禁创建新的文件（如 v2, v3, fixed 等版本）"
- 规则2: "命名规范：建议使用module_name_test_data_v{version}.csv格式（如intent_recognition_test_data_v1.csv）"

**实际影响**:
- 用户明确要求创建新文件（v2版本），与提示词冲突
- 导致执行时需要权衡遵循用户指令还是遵循提示词
- 可能造成文件版本管理混乱

**建议修改**:
```markdown
*   **必须**当测试数据需要重大重构或字段变更时，创建新版本文件（如 v2, v3 等）并更新版本号
*   **必须**当测试数据仅需要小幅修改（如修正个别用例、调整预期值）时，直接在原CSV文件上修改
*   **必须**在创建新版本文件时，保留旧版本文件作为备份，并更新相关文档说明版本变更原因
*   **必须**使用统一的命名规范：`module_name_test_data_v{version}.csv`（如intent_recognition_test_data_v1.csv）
```

#### 2.2.2 CSV转义规则模糊 ⚠️
**问题2**: 提示词中关于CSV转义的规则存在矛盾
- 规则1: "必须确保CSV中的JSON字段（如history）是标准的JSON字符串，严禁使用CSV转义（即不要用双引号包裹整个JSON字符串，也不要转义内部的双引号）"
- 数据契约要求: "任何包含特殊字符（如双引号、换行符）的字段必须用双引号`"`包围。字段内部的双引号必须转义为两个双引号`""`"

**实际影响**:
- 提示词与数据契约要求不一致
- 执行时需要判断遵循哪个规则
- 可能导致JMeter解析失败

**实际执行情况**:
- 我遵循了数据契约的要求，使用双引号包裹JSON字符串，并转义内部的双引号
- 示例: `"[{{""role"":""user"",""text"":""今天北京天气怎么样""}}]"`
- 验证脚本显示CSV格式正确，可以被正确解析

**建议修改**:
```markdown
*   **必须**遵循数据契约中的CSV转义规则：任何包含特殊字符（如双引号、换行符）的字段必须用双引号`"`包围
*   **必须**转义字段内部的双引号为两个双引号`""`
*   **示例**: JSON字符串`[{"role":"user"}]`在CSV中应写作`"[{{""role"":""user""}}]"`
*   **严禁**违背数据契约中的CSV转义规则，这会导致JMeter解析失败
```

#### 2.2.3 Few-Shot Examples与数据契约不匹配 ⚠️
**问题3**: 提示词中的Few-Shot Examples与实际数据契约的字段不完全匹配

**实际影响**:
- 示例中的字段数与实际数据契约不一致
- 可能误导Agent生成不符合数据契约的测试数据
- 需要Agent自行判断示例的有效性

**建议修改**:
- 更新Few-Shot Examples，确保与最新的数据契约完全匹配
- 使用实际的数据契约字段定义
- 提供符合数据契约格式的完整示例

#### 2.2.4 缺少字段精简指导 ⚠️
**问题4**: 提示词中没有关于如何精简字段的指导

**实际影响**:
- 当用户要求"去除多余字段"时，Agent需要自行判断哪些字段是多余的
- 可能导致字段精简不一致
- 需要依赖数据契约文档

**建议添加**:
```markdown
### 字段精简原则
*   **必须**严格遵循数据契约中定义的字段列表
*   **必须**删除数据契约中不存在的字段
*   **必须**保留数据契约中定义的所有必填字段
*   **必须**在字段精简前，先读取并确认数据契约的完整性和准确性
*   **严禁**凭记忆或推测判断哪些字段是多余的
```

#### 2.2.5 缺少等价类划分具体指导 ⚠️
**问题5**: 提示词中提到了"等价类划分"，但没有具体的指导方法

**实际影响**:
- Agent需要自行理解如何进行等价类划分
- 可能导致测试用例设计不够优化
- 需要依赖Agent的经验

**建议添加**:
```markdown
### 等价类划分方法
*   **必须**将相似场景归为一类，每类选取代表性测试数据
*   **必须**按照意图类型进行等价类划分：CHAT类、SEARCH类、MEMORY类、RECOMMEND类
*   **必须**按照情绪类型进行等价类划分：平淡类、疑问类、开心类、愤怒类、悲伤类、关切类、惊奇类、厌恶类
*   **必须**按照模态类型进行等价类划分：VISION类、NON_VISION类
*   **必须**按照测试场景进行等价类划分：正向类、反向类、边界类、鲁棒性类
*   **必须**在每个等价类中选取1-3条代表性测试数据，避免冗余
*   **示例**: 对于"天气查询"场景，可以设计"北京天气"、"上海天气"两条测试数据，不需要为每个城市都设计一条
```

## 三、提示词优化建议

### 3.1 高优先级修改 🔴

#### 修改1: 解决文件管理规则矛盾
**位置**: Rules & Constraints - 必须执行 (Do)
**修改内容**: 如上文"问题1"所示

#### 修改2: 统一CSV转义规则
**位置**: Rules & Constraints - 必须执行 (Do)
**修改内容**: 如上文"问题2"所示

#### 修改3: 更新Few-Shot Examples
**位置**: Few-Shot Examples
**修改内容**: 使用实际的数据契约字段定义，提供符合数据契约格式的完整示例

### 3.2 中优先级修改 🟡

#### 修改4: 添加字段精简原则
**位置**: Rules & Constraints - 必须执行 (Do)
**修改内容**: 如上文"问题4"所示

#### 修改5: 添加等价类划分方法
**位置**: Rules & Constraints - 必须执行 (Do)
**修改内容**: 如上文"问题5"所示

### 3.3 低优先级修改 🟢

#### 修改6: 增强错题本记录
**位置**: Iteration & Knowledge Management - 错题本机制
**修改内容**: 增加更多错误类型的记录示例，如字段不匹配、格式错误、逻辑不一致等

#### 修改7: 优化Few-Shot Examples
**位置**: Few-Shot Examples
**修改内容**: 增加更多场景的示例，如边界测试、异常测试、鲁棒性测试等

## 四、整体评估

### 4.1 提示词质量评分
| 维度 | 评分 | 说明 |
| :--- | :--- | :--- |
| **目标明确性** | ⭐⭐⭐⭐⭐ | 核心目标非常明确，易于理解 |
| **规则完整性** | ⭐⭐⭐⭐ | 规则基本完整，但存在矛盾和模糊之处 |
| **约束严格性** | ⭐⭐⭐⭐⭐ | 约束非常严格，能有效防止错误 |
| **指导可操作性** | ⭐⭐⭐⭐ | 大部分规则可操作，但部分规则需要澄清 |
| **示例有效性** | ⭐⭐⭐ | 示例基本有效，但与数据契约不完全匹配 |
| **迭代机制** | ⭐⭐⭐⭐⭐ | 迭代机制非常健全，能有效从错误中学习 |
| **整体评分** | ⭐⭐⭐⭐ | 提示词质量良好，但需要小幅优化 |

### 4.2 是否需要更新提示词？

**结论**: **需要更新，但不是紧急更新**

**理由**:
1. **当前提示词基本可用**: 虽然存在一些问题，但整体上能够指导Agent生成高质量的测试数据
2. **问题影响可控**: 存在的问题主要是规则矛盾和模糊，Agent可以通过经验和判断来处理
3. **优化空间明显**: 通过解决上述问题，可以进一步提升提示词的有效性和可操作性
4. **用户需求满足**: 当前提示词能够满足用户的基本需求，但优化后可以更好地满足用户需求

**建议**:
- **短期**: 可以继续使用当前提示词，但在执行时需要注意上述问题
- **中期**: 逐步优化提示词，优先解决高优先级问题
- **长期**: 建立提示词版本管理机制，定期回顾和优化

## 五、具体修改建议

### 5.1 立即修改（高优先级）

#### 修改1: 文件管理规则
```markdown
*   **必须**当测试数据需要重大重构或字段变更时，创建新版本文件（如 v2, v3 等）并更新版本号
*   **必须**当测试数据仅需要小幅修改（如修正个别用例、调整预期值）时，直接在原CSV文件上修改
*   **必须**在创建新版本文件时，保留旧版本文件作为备份，并更新相关文档说明版本变更原因
*   **必须**使用统一的命名规范：`module_name_test_data_v{version}.csv`（如intent_recognition_test_data_v1.csv）
```

#### 修改2: CSV转义规则
```markdown
*   **必须**遵循数据契约中的CSV转义规则：任何包含特殊字符（如双引号、换行符）的字段必须用双引号`"`包围
*   **必须**转义字段内部的双引号为两个双引号`""`
*   **示例**: JSON字符串`[{"role":"user"}]`在CSV中应写作`"[{{""role"":""user""}}]"`
*   **严禁**违背数据契约中的CSV转义规则，这会导致JMeter解析失败
```

#### 修改3: Few-Shot Examples
```markdown
<example>
**User**: 为意图识别接口设计关于"天气查询"的DDT测试数据，包含异常场景。

**Assistant**:
```csv
user_id|session_id|history|asr_emotion|asr_emotion_confidence|expected_status|expected_label|expected_emotion|expected_modality|description
test_user_001|session_001|"[{{""role"":""user"",""text"":""今天北京天气怎么样""}}]"|疑问|0.85|200|SEARCH|疑问|NON_VISION|正向-标准天气查询
test_user_002|session_002|"[{{""role"":""user"",""text"":""帮我查一下明天上海的天气""}}]"|疑问|0.88|200|SEARCH|疑问|NON_VISION|正向-上海天气查询
test_user_003|session_003|"[]"|平淡|0.50|200|CHAT|平淡|NON_VISION|异常-空历史记录
test_user_004|session_004|"[{{""role"":""user"",""text"":""😊😊😊""}}]"|开心|0.70|200|CHAT|开心|NON_VISION|鲁棒-特殊字符输入
test_user_005|session_005|"[{{""role"":""user"",""text"":""你记得我上次跟你说过什么吗""}}]"|疑问|0.75|200|MEMORY|疑问|NON_VISION|场景-记忆追溯
```
</example>
```

### 5.2 后续优化（中低优先级）

#### 修改4: 字段精简原则
```markdown
### 字段精简原则
*   **必须**严格遵循数据契约中定义的字段列表
*   **必须**删除数据契约中不存在的字段
*   **必须**保留数据契约中定义的所有必填字段
*   **必须**在字段精简前，先读取并确认数据契约的完整性和准确性
*   **严禁**凭记忆或推测判断哪些字段是多余的
```

#### 修改5: 等价类划分方法
```markdown
### 等价类划分方法
*   **必须**将相似场景归为一类，每类选取代表性测试数据
*   **必须**按照意图类型进行等价类划分：CHAT类、SEARCH类、MEMORY类、RECOMMEND类
*   **必须**按照情绪类型进行等价类划分：平淡类、疑问类、开心类、愤怒类、悲伤类、关切类、惊奇类、厌恶类
*   **必须**按照模态类型进行等价类划分：VISION类、NON_VISION类
*   **必须**按照测试场景进行等价类划分：正向类、反向类、边界类、鲁棒性类
*   **必须**在每个等价类中选取1-3条代表性测试数据，避免冗余
```

## 六、领域知识与设计原则

### 6.1 领域特定字段规范

| 字段类型 | 示例字段 | 约束 | 说明 |
| :--- | :--- | :--- | :--- |
| 文本识别字段 | `text`, `content` | UTF-8 | 识别文本，支持特殊标记（如 `<unk>`, `<sil>`, `[noise]`） |
| 置信度字段 | `confidence`, `score` | 0.0-1.0 | 置信度，通常 <0.6 视为不可靠 |
| 特征字段 | `features`, `asr_features` | array | 枚举列表，如 `["<sil>", "[noise]", "[int]", "[rep]"]` |

### 6.2 业务枚举值
根据具体业务场景，可能包含以下枚举类型（实际枚举值必须严格遵循 Data Contract 中的定义）：
*   **意图类型**: 根据业务需求定义（如 `CHAT`, `MEMORY`, `SEARCH`, `RECOMMEND`）
*   **模态类型**: 根据交互方式定义（如 `VISION` 视觉触发, `NON_VISION` 非视觉触发）
*   **情绪类型**: 根据情感识别需求定义（如 `平淡`, `关切`, `开心`, `愤怒`, `悲伤`, `疑问`, `惊奇`, `厌恶`）

### 6.3 避免幻觉 (Anti-Hallucination)
*   **必须**严格遵循上游提供的 **Data Contract**，**严禁**生成契约中不存在的字段或值。
*   **必须**在引用字段时使用契约中定义的准确字段名，**严禁**凭记忆或推测使用字段名。
*   **必须**在生成枚举值时严格遵循契约中的枚举列表，**严禁**添加或修改枚举值。
*   **必须**在涉及业务逻辑时参考契约中的"业务含义"说明，**严禁**自行推测字段用途。
*   **必须**在不确定字段定义时向用户确认，**严禁**基于假设生成数据。
*   **必须**在生成示例数据前先验证契约的完整性和准确性，**严禁**基于不完整或过时的契约生成数据。

### 6.4 用户输入字段设计原则
**核心要求**：手动设计，模拟真实人类对话，确保语气、情绪、内容的一致性。

#### 6.4.1 话术唯一性原则（最高优先级）
- **必须**确保同一意图类型下的每条测试用例使用**完全不同的话术表达方式**
- **严禁**重复使用相同的句式结构或模板化表达
- **必须**为每条测试用例设计独特、自然的对话内容
- **必须**避免机械替换关键词（如"你记得我上次跟你说过XX吗"中只替换XX）
- **必须**从不同角度、不同语气、不同场景设计同一意图的测试用例

**反例（模板化话术）**：
```
"你记得我上次跟你说过我喜欢什么运动吗"
"还记得我上次跟你说过我的工作是什么吗"
"你记得我上次跟你说的那个梦想吗"
"还记得我上次跟你说的学习计划吗"
```
❌ 问题：都是"你记得我上次跟你说过XX吗"的固定句式，只替换了关键词

**正例（多样化话术）**：
```
"对了，上次我跟你提过我喜欢打篮球，你还记得吧"
"我想确认一下，我之前跟你说过我是做程序员的对吧"
"哎，你记得我跟你分享过我的梦想吗，就是那个环游世界的"
"上次跟你聊的学习计划，你还有印象吗"
"咱们之前聊过我的爱好，你还记得我喜欢什么吗"
"那个...我之前跟你说过的生活习惯，你还能想起来吗"
```
✅ 优点：每条话术都有独特的表达方式、语气和场景

#### 6.4.2 语气一致性
- **开心**：积极、轻松（如"太棒了"、"真不错"、"哈哈"）
- **愤怒**：抱怨、不满（如"烦死了"、"怎么回事"、"太差了"）
- **关切**：关心、担忧（如"怎么样了"、"还好吗"、"要注意身体"）
- **疑问**：询问、不确定（如"你知道吗"、"怎么办"、"是不是"）

#### 6.4.3 内容真实性
- 模拟真实场景下的对话，避免机械、模板化的表达
- 使用口语化表达，包含语气词（如"啊"、"吧"、"呢"、"嘛"）
- 包含省略（如"那个..."、"嗯..."）、重复（如"好好好"、"对对对"）等自然语言特征

#### 6.4.4 话题多样性
- **生活类**：天气、美食、购物、旅游、健康、家庭、育儿
- **工作类**：汇报、会议、项目管理、技术问题、职场沟通
- **学习类**：作业、考试、课程、培训、知识查询
- **娱乐类**：电影、音乐、游戏、追剧、明星八卦
- **社交类**：约会、聚会、聊天、交友、情感咨询
- **金融类**：理财、投资、贷款、信用卡、保险
- **科技类**：软件、硬件、互联网、AI、数码产品
- **医疗类**：症状、药物、检查、治疗、养生

#### 6.4.5 人群多样性
- **年龄段**：儿童（3-12岁）、青少年（13-18岁）、青年（19-35岁）、中年（36-55岁）、老年（55岁以上）
- **职业**：医生、教师、程序员、厨师、司机、销售、律师、会计、设计师、工人、农民等
- **地域**：北方、南方、东部、西部，不同方言风格（如东北话、四川话、粤语等）
- **性别**：男性、女性，不同性别在表达方式上的差异

#### 6.4.6 场景多样性
- **家庭场景**：夫妻对话、亲子对话、老人与子女对话
- **工作场景**：与同事沟通、向领导汇报、客户服务
- **学习场景**：师生对话、同学讨论、自学提问
- **社交场景**：朋友聚会、约会、闲聊
- **服务场景**：客服咨询、投诉、建议

#### 6.4.7 表达方式多样性
- **句式类型**：陈述句、疑问句、感叹句、反问句、祈使句
- **语气强度**：强烈、温和、委婉、直接
- **语言风格**：正式、非正式、网络用语、方言、混合语言

#### 6.4.8 意图一致性
- **CHAT**：日常对话、闲聊、情感表达等
- **SEARCH**：包含明确的查询意图（如"查询"、"搜索"、"了解"等）
- **MEMORY**：包含记忆相关的表达（如"还记得"、"记住了"、"上次"等）
  - **MEMORY意图话术多样性示例**：
    - "对了，上次我跟你提过我喜欢打篮球，你还记得吧"
    - "我想确认一下，我之前跟你说过我是做程序员的对吧"
    - "哎，你记得我跟你分享过我的梦想吗，就是那个环游世界的"
    - "上次跟你聊的学习计划，你还有印象吗"
    - "咱们之前聊过我的爱好，你还记得我喜欢什么吗"
    - "那个...我之前跟你说过的生活习惯，你还能想起来吗"
    - "我记得跟你说过我的目标是XX，你那边有记录吗"
    - "之前跟你聊过那次经历，你还记得吗"
    - "我之前跟你说过我喜欢什么运动来着，你帮我回忆一下"
    - "咱们上次聊到我的工作，我说过我是做什么的来着"
  - **关键要求**：每条MEMORY测试用例必须使用不同的句式结构，不能重复使用"你记得我上次跟你说过XX吗"这种固定模板
- **RECOMMEND**：模糊推荐请求（如"推荐一下"、"有什么好玩的"等），不包含明确实体领域
  - **RECOMMEND意图话术多样性示例**：
    - "有点无聊，不知道干什么好"
    - "冷场了，你推荐个话题吧"
    - "不知道聊什么了，推荐点好玩的"
    - "最近没什么娱乐活动，推荐点好玩的"
    - "想学点新东西，你推荐一下"
    - "不知道吃什么好，你推荐一下吧"
    - "想去旅游，推荐个好玩的地方"
    - "周末想出去走走，有什么好去处吗"
    - "最近想看点书，有什么推荐吗"
    - "想换个发型，你有什么建议吗"
  - **关键要求**：每条RECOMMEND测试用例必须使用不同的句式结构，不能重复使用"推荐一下XX"这种固定模板
- **SEARCH意图话术多样性示例**：
  - "帮我查一下深圳明天的天气"
  - "搜索一下最近有什么好看的电影"
  - "推荐几本好看的科幻小说"
  - "查一下今天的热点新闻"
  - "附近有没有好吃的火锅店"
  - "帮我找一些好听的音乐"
  - "查一下腾讯股票今天的行情"
  - "从北京到上海的高铁票还有吗"
  - "感冒了应该吃什么药"
  - "有哪些好的在线课程推荐"
  - "查一下去三亚旅游的攻略"
  - "帮我找一些性价比高的手机"
  - "有什么好吃的川菜推荐吗"
  - "查一下最新的NBA比赛结果"
  - "搜索一下人工智能的发展趋势"
  - **关键要求**：每条SEARCH测试用例必须使用不同的句式结构，不能重复使用"查一下XX"这种固定模板

## 七、Few-Shot Examples

<example>
**User**: 为意图识别接口设计关于"天气查询"的DDT测试数据，包含异常场景。

**Assistant**:
```csv
user_id|session_id|history|asr_emotion|asr_emotion_confidence|expected_status|expected_label|expected_emotion|expected_modality|description
test_user_001|session_001|"[{{""role"":""user"",""text"":""今天北京天气怎么样""}}]"|疑问|0.95|200|SEARCH|疑问|NON_VISION|正向-SEARCH意图-天气查询-疑问
test_user_002|session_002|"[{{""role"":""user"",""text"":""帮我查一下这个世界上最长的城市叫什么名字，还有它的历史和现在的变化趋势""}}]"|平淡|0.90|200|SEARCH|平淡|NON_VISION|边界-SEARCH意图-超长文本-平淡
test_user_003|session_003|[]|平淡|0.85|200|CHAT|平淡|NON_VISION|异常-空历史记录-平淡
test_user_004|session_004|"[{{""role"":""user"",""text"":""今天天气真好呀🌞""}}]"|开心|0.92|200|CHAT|开心|NON_VISION|鲁棒-CHAT意图-Emoji表情-开心
test_user_005|session_005|"[{{""role"":""user"",""text"":""那个...今天天气怎么样来着""}}]"|平淡|0.65|200|CHAT|疑问|NON_VISION|反向-ASR置信度低-平淡
test_user_006|session_006|"[{{""role"":""user"",""text"":""对了，上次我跟你提过我喜欢吃苹果，你还记得吧""}},{""role"":""assistant"",""text"":""记得啊，你说过你喜欢吃苹果""}}]"|疑问|0.88|200|MEMORY|疑问|NON_VISION|场景-MEMORY意图-记忆追溯-疑问
```
</example>

<example>
**User**: 设计多样化的测试数据，涵盖不同话题、人群和场景，确保话术多样性。

**Assistant**:
```csv
user_id|session_id|history|asr_emotion|asr_emotion_confidence|expected_status|expected_label|expected_emotion|expected_modality|description
test_user_001|session_001|"[{{""role"":""user"",""text"":""医生，我最近总是头疼，是不是有什么问题""}}]"|关切|0.85|200|CHAT|关切|NON_VISION|医疗-医生询问症状-关切
test_user_002|session_002|"[{{""role"":""user"",""text"":""老师，这道数学题怎么做啊，我实在想不明白""}}]"|疑问|0.92|200|CHAT|疑问|NON_VISION|教育-小学生问作业-疑问
test_user_003|session_003|"[{{""role"":""user"",""text"":""气死我了，这个bug怎么又出现了，我都改了好几遍了""}}]"|愤怒|0.88|200|CHAT|愤怒|NON_VISION|科技-程序员问bug-愤怒
test_user_004|session_004|"[{{""role"":""user"",""text"":""今天做了个红烧肉，味道特别棒，你要不要尝尝""}}]"|开心|0.90|200|CHAT|开心|NON_VISION|美食-厨师推荐菜谱-开心
test_user_005|session_005|"[{{""role"":""user"",""text"":""我想了解一下最近有什么好的理财产品推荐""}}]"|疑问|0.87|200|SEARCH|疑问|NON_VISION|金融-理财咨询-疑问
test_user_006|session_006|"[{{""role"":""user"",""text"":""帮我查一下下个月去云南旅游的行程安排""}}]"|疑问|0.91|200|SEARCH|疑问|NON_VISION|旅游-规划行程-疑问
test_user_007|session_007|"[{{""role"":""user"",""text"":""这个手机现在有优惠吗""}}]"|疑问|0.89|200|SEARCH|疑问|NON_VISION|购物-询问商品优惠-疑问
test_user_008|session_008|"[{{""role"":""user"",""text"":""对了，上次我跟你提过我喜欢打篮球，你还记得吧""}}]"|疑问|0.86|200|MEMORY|疑问|NON_VISION|MEMORY-运动喜好-疑问
test_user_009|session_009|"[{{""role"":""user"",""text"":""我想确认一下，我之前跟你说过我是做程序员的对吧""}}]"|疑问|0.88|200|MEMORY|疑问|NON_VISION|MEMORY-工作信息-疑问
test_user_010|session_010|"[{{""role"":""user"",""text"":""哎，你记得我跟你分享过我的梦想吗，就是那个环游世界的""}}]"|关切|0.90|200|MEMORY|关切|NON_VISION|MEMORY-梦想回忆-关切
test_user_011|session_011|"[{{""role"":""user"",""text"":""上次跟你聊的学习计划，你还有印象吗""}}]"|关切|0.92|200|MEMORY|关切|NON_VISION|MEMORY-学习计划-关切
test_user_012|session_012|"[{{""role"":""user"",""text"":""咱们之前聊过我的爱好，你还记得我喜欢什么吗""}}]"|疑问|0.87|200|MEMORY|疑问|NON_VISION|MEMORY-兴趣爱好-疑问
test_user_013|session_013|"[{{""role"":""user"",""text"":""那个...我之前跟你说过的生活习惯，你还能想起来吗""}}]"|关切|0.91|200|MEMORY|关切|NON_VISION|MEMORY-生活习惯-关切
test_user_014|session_014|"[{{""role"":""user"",""text"":""我记得跟你说过我的目标是XX，你那边有记录吗""}}]"|关切|0.89|200|MEMORY|关切|NON_VISION|MEMORY-目标回忆-关切
test_user_015|session_015|"[{{""role"":""user"",""text"":""之前跟你聊过那次经历，你还记得吗""}}]"|关切|0.93|200|MEMORY|关切|NON_VISION|MEMORY-经历回忆-关切
test_user_016|session_016|"[{{""role"":""user"",""text"":""有点无聊，不知道干什么好""}}]"|平淡|0.75|200|RECOMMEND|平淡|NON_VISION|RECOMMEND-无聊推荐-平淡
test_user_017|session_017|"[{{""role"":""user"",""text"":""冷场了，你推荐个话题吧""}}]"|平淡|0.73|200|RECOMMEND|平淡|NON_VISION|RECOMMEND-冷场推荐-平淡
test_user_018|session_018|"[{{""role"":""user"",""text"":""不知道聊什么了，推荐点好玩的""}}]"|平淡|0.76|200|RECOMMEND|平淡|NON_VISION|RECOMMEND-话题推荐-平淡
test_user_019|session_019|"[{{""role"":""user"",""text"":""最近没什么娱乐活动，推荐点好玩的""}}]"|平淡|0.74|200|RECOMMEND|平淡|NON_VISION|RECOMMEND-娱乐推荐-平淡
test_user_020|session_020|"[{{""role"":""user"",""text"":""想学点新东西，你推荐一下""}}]"|平淡|0.78|200|RECOMMEND|平淡|NON_VISION|RECOMMEND-学习推荐-平淡
test_user_021|session_021|"[{{""role"":""user"",""text"":""不知道吃什么好，你推荐一下吧""}}]"|平淡|0.75|200|RECOMMEND|平淡|NON_VISION|RECOMMEND-美食推荐-平淡
test_user_022|session_022|"[{{""role"":""user"",""text"":""想去旅游，推荐个好玩的地方""}}]"|平淡|0.77|200|RECOMMEND|平淡|NON_VISION|RECOMMEND-旅游推荐-平淡
test_user_023|session_023|"[{{""role"":""user"",""text"":""周末想出去走走，有什么好去处吗""}}]"|平淡|0.79|200|RECOMMEND|平淡|NON_VISION|RECOMMEND-周末推荐-平淡
test_user_024|session_024|"[{{""role"":""user"",""text"":""最近想看点书，有什么推荐吗""}}]"|平淡|0.76|200|RECOMMEND|平淡|NON_VISION|RECOMMEND-书籍推荐-平淡
test_user_025|session_025|"[{{""role"":""user"",""text"":""想换个发型，你有什么建议吗""}}]"|平淡|0.78|200|RECOMMEND|平淡|NON_VISION|RECOMMEND-发型建议-平淡
```
</example>

## 八、总结

### 7.1 流程总结
本次DDT测试数据生成流程整体顺利，成功生成了50条高质量的测试用例。流程中遵循了提示词的大部分要求，但在文件管理和CSV转义方面存在一些矛盾。

### 7.2 提示词评估
当前提示词质量良好，能够有效指导Agent生成高质量的测试数据。但存在一些规则矛盾和模糊之处，需要优化。

### 7.3 优化建议
建议优先解决高优先级问题（文件管理规则矛盾、CSV转义规则模糊、Few-Shot Examples不匹配），后续逐步优化中低优先级问题。

### 7.4 下一步行动
1. **立即**: 继续使用当前提示词，但在执行时注意上述问题
2. **短期**: 优化高优先级问题
3. **中期**: 优化中低优先级问题
4. **长期**: 建立提示词版本管理机制，定期回顾和优化
