# 意图识别测试数据 v2 设计说明

## 文件信息
- **文件名**: intent_recognition_test_data_v2.csv
- **文件路径**: e:\AI测试用例\接口测试\data\intent_recognition_test_data_v2.csv
- **数据行数**: 50条
- **字段数**: 10个（符合数据契约要求）
- **分隔符**: | (竖线)
- **编码**: UTF-8

## 字段定义
| 字段名 | 描述 |
| :--- | :--- |
| user_id | 用户唯一标识 |
| session_id | 会话唯一标识 |
| history | 历史对话上下文 (JSON Array) |
| asr_emotion | ASR 识别的情绪标签 |
| asr_emotion_confidence | ASR 置信度 (0.0-1.0) |
| expected_status | 预期 HTTP 状态码 |
| expected_label | 预期意图标签 (Label) |
| expected_emotion | 预期情绪标签 (Emotion) |
| expected_modality | 预期模态 (Modality) |
| description | 用例描述 |

## 测试用例覆盖统计

### 意图类型分布
| 意图类型 | 数量 | 占比 |
| :--- | :--- | :--- |
| CHAT | 24 | 48% |
| SEARCH | 18 | 36% |
| MEMORY | 4 | 8% |
| RECOMMEND | 4 | 8% |

### 情绪类型分布
| 情绪类型 | 数量 | 占比 |
| :--- | :--- | :--- |
| 平淡 | 19 | 38% |
| 疑问 | 14 | 28% |
| 开心 | 7 | 14% |
| 愤怒 | 2 | 4% |
| 悲伤 | 2 | 4% |
| 关切 | 2 | 4% |
| 惊奇 | 2 | 4% |
| 厌恶 | 2 | 4% |

### 模态类型分布
| 模态类型 | 数量 | 占比 |
| :--- | :--- | :--- |
| NON_VISION | 43 | 86% |
| VISION | 7 | 14% |

## 测试用例分类

### 1. 正向用例 (46条)

#### 1.1 CHAT意图 (24条)
- **打招呼** (2条): "你好呀"、"你好，今天天气不错"
- **闲聊** (2条): "今天天气不错，心情也挺好的"
- **情绪表达** (16条):
  - 开心: "太好了！我通过了考试"、"今天心情特别好"
  - 愤怒: "气死我了，怎么又出错了"、"别来烦我"
  - 悲伤: "唉，最近心情不太好"、"失败了，很难过"
  - 关切: "你还好吗？"、"要注意身体哦"
  - 疑问: "这是什么意思？"、"真的吗？"
  - 惊奇: "哇，真的吗？"、"太神奇了！"
  - 厌恶: "太恶心了"、"真讨厌"
- **记忆写入** (2条): "帮我记住这个信息"、"别忘了我的生日是10月1日"
- **询问信息** (2条): "你叫什么名字？"

#### 1.2 SEARCH意图 (18条)
- **天气查询** (2条): "今天北京天气怎么样"、"帮我查一下明天上海的天气"
- **位置查询** (2条): "帮我查一下附近的餐厅"、"附近哪里有加油站"
- **搜索查询** (2条): "搜索一下关于人工智能的最新新闻"、"搜索一下附近的咖啡店"
- **明确推荐** (4条): "推荐一部好看的电影"、"找一家好吃的火锅店"、"推荐一首好听的歌"、"找一本好看的书"
- **视觉识别** (6条):
  - "看看这张图片里有什么"
  - "帮我识别一下这张照片"
  - "你能看到我吗"
  - "拍张照片看看"
  - "识别一下这个物体"
  - "看看这张图片里有什么东西"
  - "这张图好漂亮" (CHAT意图，但使用VISION模态)

#### 1.3 MEMORY意图 (4条)
- **记忆查询** (4条):
  - "你记得我上次跟你说过什么吗"
  - "还记得我喜欢的颜色吗"
  - "你记得我上次跟你说过什么吗，关于我的工作"
  - "还记得我上次跟你说的那个项目吗"

#### 1.4 RECOMMEND意图 (4条)
- **模糊推荐** (4条):
  - "有点无聊，推荐点好玩的"
  - "不知道聊什么了，你推荐个话题吧"
  - "最近有点无聊，不知道干什么"
  - "冷场了，你推荐个话题吧"

### 2. 反向用例 (2条)
- **空历史记录** (1条): history为空数组 []
- **空文本输入** (1条): history中文本为空字符串 ""

### 3. 鲁棒性用例 (2条)
- **纯Emoji输入** (1条): "😊😊😊"
- **较长文本** (1条): "你好呀！今天天气真不错，心情也挺好的，要不要聊聊天？"

## 设计原则遵循

### 1. 文本自然性
✓ 所有文本都是手动设计的自然对话
✓ 避免使用"XXX一下相关的内容"等模板化表达
✓ 使用真实用户的口语化表达

### 2. 情绪一致性
✓ 文本内容与asr_emotion标签高度一致
✓ 每种情绪类型都有对应的自然文本示例
✓ 情绪表达真实、自然

### 3. 意图一致性
✓ 文本内容与expected_label标签高度一致
✓ 区分RECOMMEND和SEARCH意图（RECOMMEND仅用于模糊推荐）
✓ MEMORY仅用于记忆查询，不包含记忆写入操作

### 4. 模态一致性
✓ VISION模态的测试用例包含视觉相关关键词
✓ NON_VISION模态的测试用例不涉及视觉能力
✓ 模态与文本内容高度一致

### 5. 全维度覆盖
✓ 正向用例: 46条（92%）
✓ 反向用例: 2条（4%）
✓ 鲁棒性用例: 2条（4%）
✓ 覆盖所有意图类型: CHAT, SEARCH, MEMORY, RECOMMEND
✓ 覆盖所有情绪类型: 平淡, 疑问, 开心, 愤怒, 悲伤, 关切, 惊奇, 厌恶
✓ 覆盖所有模态类型: VISION, NON_VISION

## 与之前版本的区别

### 之前版本的问题
1. 字段过多（11个字段），包含不必要的字段
2. 部分文本不够自然，存在模板化表达
3. MEMORY意图被误用于记忆写入操作
4. 测试用例数量过多（100条），存在冗余

### 新版本的改进
1. 字段精简为10个，严格遵循数据契约
2. 所有文本都是手动设计的自然对话
3. MEMORY意图仅用于记忆查询
4. 测试用例数量优化为50条，使用等价类划分方法
5. 更好的覆盖率和代表性

## 使用建议

1. **JMeter测试**: 直接使用此CSV文件进行JMeter测试
2. **字段映射**: 确保JMeter的CSV Data Set Config正确映射所有10个字段
3. **结果分析**: 根据测试结果分析API的意图识别准确性
4. **迭代优化**: 根据测试结果持续优化测试用例

## 版本历史
- **v2.0** (2026-01-12): 重新设计，50条测试用例，严格遵循数据契约
