### 1.1 提示词与文档分工原则（混合方案）

**核心原则**：
- **规则调整** → 提示词形式（必须）
  - 动态调整规则需要立即生效
  - 规则需要明确的Do/Don't指令
  - 规则调整频率高，便于快速迭代

- **执行流程** → 提示词形式（精简版）+ 文档形式（详细版）
  - 提示词层：流程图、关键步骤、快速指引
  - 文档层：详细说明、历史记录、用户操作使用指南
  


**文件组织结构**：
```
.trae/rules/
├── DDT测试数据管理智能体提示词.md（通用提示词）

接口测试/rules/
└── 意图识别DDT优化提示词.md（业务提示词，≤8000字符）
    ├── 0. 快速执行指引 ⚡
    ├── 1. Role & Objectives
    ├── 2. Core Workflow (SOP)（精简版）
    ├── 3. Rules & Constraints（包含动态调整规则）
    ├── 4. Decision Trees（关键决策逻辑）
    ├── 5. Few-Shot Examples（精简版）
    └── 6. Output Format

接口测试/docs/
└── 意图识别业务优化文档.md（详细版）
    ├── 1. 业务背景
    ├── 2. 执行流程详解（6阶段详细说明）
    ├── 3. 规则调整指南（历史记录）
    ├── 4. 示例和案例（详细版）
    ├── 5. 用户操作使用指南
    └── 6. FAQ
```

**内容分离原则**：
| 内容类型 | 存储位置 | 理由 |
| :--- | :--- | :--- |
| 执行指令 | 提示词 | Agent需要快速执行 |
| 决策树 | 提示词 | Agent需要快速决策 |
| Do/Don't规则 | 提示词 | 明确约束条件 |
| 快速指引 | 提示词 | 提升执行效率 |
| 业务背景 | 文档 | 人工需要理解 |
| 历史记录 | 文档 | 便于追溯 |
| 详细示例 | 文档 | 减少提示词长度 |
| 用户操作使用指南 | 文档 | 用户使用需要 |

### 1.2 提示词与业务文档关联规则

**关联原则**：
提示词必须明确引用业务文档，确保智能体在需要详细信息时能够快速定位。

**关联位置**：

1. **快速执行指引章节（0.1）**
   - 添加业务文档相关任务的快速定位
   - 示例：
     | 任务类型 | 快速定位章节 | 关键操作 |
     | :--- | :--- | :--- |
     | **查看详细流程** | 业务文档第2章 | 阅读6阶段详细说明 |
     | **查看历史记录** | 业务文档第3章 | 查看规则调整历史 |
     | **查看FAQ** | 业务文档第6章 | 查找常见问题解答 |

2. **关键文件路径速查章节（0.2）**
   - 添加业务文档的完整路径
   - 示例：
     | 文件类型 | 文件路径 | 用途 |
     | :--- | :--- | :--- |
     | **业务文档** | `e:\AI测试用例\接口测试\docs\意图识别业务优化文档.md` | 详细业务文档（6阶段流程、历史记录、FAQ） |

3. **文件职责表章节（2.2）**
   - 添加业务文档的职责说明
   - 示例：
     | 文件路径 | 文件类型 | 核心职责 |
     | :--- | :--- | :--- |
     | `docs/意图识别业务优化文档.md` | 业务文档 | 提供详细的业务背景、6阶段执行流程、历史调整记录、FAQ（详细版，面向用户） |

**关联验证标准**：
- [ ] 提示词的"快速执行指引"中包含业务文档相关任务的定位
- [ ] 提示词的"关键文件路径速查"中包含业务文档的完整路径
- [ ] 提示词的"文件职责表"中包含业务文档的职责说明
- [ ] 业务文档的路径使用完整的绝对路径
- [ ] 业务文档的职责说明明确区分面向智能体和面向用户

### 1.3 提示词性能优化规则 ⚡

**核心目标**：提升智能体执行效率，减少不必要的思考时间和文档读取。

**5大性能优化原则**：

| 优化原则 | 具体要求 | 适用场景 |
| :--- | :--- | :--- |
| **1. 避免过度分析** | 对于明确的任务，直接执行，不反复确认 | 用户需求明确、参数完整 |
| **2. 减少文档读取** | 只在必要时才读取文档，不默认读取所有文档 | 简单任务、已有明确指令 |
| **3. 智能判断复杂度** | 根据任务复杂度决定是否创建todo list | 区分简单任务（≤2步）和复杂任务（≥3步） |
| **4. 快速失败** | 遇到错误立即返回，不尝试其他方法 | 文件不存在、命令执行失败 |
| **5. 并行处理** | 多个独立操作并行执行，减少等待时间 | 读取多个独立文件、执行多个独立命令 |

**详细说明**：

#### 1. 避免过度分析
- **禁止行为**：
  - ❌ 不要反复确认用户已明确的需求
  - ❌ 不要过度分析简单的任务
  - ❌ 不要在执行前进行过多的前置检查
- **推荐行为**：
  - ✅ 对于明确的任务，立即开始执行
  - ✅ 只做必要的验证，避免过度检查
  - ✅ 直接执行命令，不反复确认

#### 2. 减少文档读取
- **禁止行为**：
  - ❌ 不要默认读取所有相关文档
  - ❌ 不要重复读取用户已提供的文件
  - ❌ 不要在每次操作前都读取配置文档
- **推荐行为**：
  - ✅ 只在需要验证参数时才读取数据契约文档
  - ✅ 只在遇到问题时才读取业务文档
  - ✅ 优先使用提示词中的快速指引

#### 3. 智能判断复杂度
- **创建Todo List的场景**（任务复杂度≥3步）：
  - ✅ 需要生成多个CSV文件
  - ✅ 需要处理多个不同的业务场景
  - ✅ 任务涉及错误修复和重试
  - ✅ 需要多个阶段的完整工作流
- **不创建Todo List的场景**（任务复杂度≤2步）：
  - ❌ 用户直接提供CSV文件，只需执行生成命令
  - ❌ 简单的单场景语音生成
  - ❌ 已有CSV文件的批量生成

#### 4. 快速失败
- **错误处理原则**：
  - 如果CSV文件不存在，立即报错，不要尝试读取其他文档
  - 如果命令执行失败，立即返回错误信息，不要尝试其他方法
  - 如果遇到未知错误，记录到错题本，然后继续下一个任务
- **错误处理流程**：
  ```mermaid
  graph TD
      A[执行任务] --> B{成功?}
      B -->|是| C[返回结果]
      B -->|否| D{可快速修复?}
      D -->|是| E[修复并重试]
      D -->|否| F[记录到错题本]
      F --> G[返回错误信息]
      E --> A
  ```

#### 5. 并行处理
- **并行调用策略**：
  ```python
  # ✅ 推荐：并行读取多个独立文件
  Read(file_path="file1.csv")
  Read(file_path="file2.csv")
  Read(file_path="file3.csv")
  
  # ❌ 避免：串行读取文件
  Read(file_path="file1.csv")
  # 等待结果...
  Read(file_path="file2.csv")
  # 等待结果...
  ```
- **适用场景**：
  - 读取多个独立的CSV文件
  - 执行多个独立的命令
  - 读取多个独立的配置文件

**实施建议**：
1. 在提示词的"快速执行指引"章节（第0章）中明确这些优化原则
2. 在提示词的"Rules & Constraints"章节中添加具体的Do/Don't规则
3. 在提示词的"Core Workflow"章节中展示优化后的执行流程
4. 定期检查提示词是否符合这些优化原则
5. 根据实际执行效果持续优化
### 1.1 提示词与文档分工原则（混合方案）

**核心原则**：
- **规则调整** → 提示词形式（必须）
  - 动态调整规则需要立即生效
  - 规则需要明确的Do/Don't指令
  - 规则调整频率高，便于快速迭代

- **执行流程** → 提示词形式（精简版）+ 文档形式（详细版）
  - 提示词层：流程图、关键步骤、快速指引
  - 文档层：详细说明、历史记录、用户操作使用指南
  


**文件组织结构**：
```
./rules/
└── 意图识别DDT优化提示词.md（业务提示词，≤8000字符）
    ├── 0. 快速执行指引 ⚡
    ├── 1. Role & Objectives
    ├── 2. Core Workflow (SOP)（精简版）
    ├── 3. Rules & Constraints（包含动态调整规则）
    ├── 4. Decision Trees（关键决策逻辑）
    ├── 5. Few-Shot Examples（精简版）
    └── 6. Output Format

./docs/
└── 意图识别业务优化文档.md（详细版）
    ├── 1. 业务背景
    ├── 2. 执行流程详解（6阶段详细说明）
    ├── 3. 规则调整指南（历史记录）
    ├── 4. 示例和案例（详细版）
    ├── 5. 用户操作使用指南
    └── 6. FAQ
```

**内容分离原则**：
| 内容类型 | 存储位置 | 理由 |
| :--- | :--- | :--- |
| 执行指令 | 提示词 | Agent需要快速执行 |
| 决策树 | 提示词 | Agent需要快速决策 |
| Do/Don't规则 | 提示词 | 明确约束条件 |
| 快速指引 | 提示词 | 提升执行效率 |
| 业务背景 | 文档 | 人工需要理解 |
| 历史记录 | 文档 | 便于追溯 |
| 详细示例 | 文档 | 减少提示词长度 |
| 用户操作使用指南 | 文档 | 用户使用需要 |

### 1.2 提示词与业务文档关联规则

**关联原则**：
提示词必须明确引用业务文档，确保智能体在需要详细信息时能够快速定位。

**关联位置**：

1. **快速执行指引章节（0.1）**
   - 添加业务文档相关任务的快速定位
   - 示例：
     | 任务类型 | 快速定位章节 | 关键操作 |
     | :--- | :--- | :--- |
     | **查看详细流程** | 业务文档第2章 | 阅读6阶段详细说明 |
     | **查看历史记录** | 业务文档第3章 | 查看规则调整历史 |
     | **查看FAQ** | 业务文档第6章 | 查找常见问题解答 |

2. **关键文件路径速查章节（0.2）**
   - 添加业务文档的完整路径
   - 示例：
     | 文件类型 | 文件路径 | 用途 |
     | :--- | :--- | :--- |
     | **业务文档** | `e:\AI测试用例\接口测试\docs\意图识别业务优化文档.md` | 详细业务文档（6阶段流程、历史记录、FAQ） |

3. **文件职责表章节（2.2）**
   - 添加业务文档的职责说明
   - 示例：
     | 文件路径 | 文件类型 | 核心职责 |
     | :--- | :--- | :--- |
     | `docs/意图识别业务优化文档.md` | 业务文档 | 提供详细的业务背景、6阶段执行流程、历史调整记录、FAQ（详细版，面向用户） |

**关联验证标准**：
- [ ] 提示词的"快速执行指引"中包含业务文档相关任务的定位
- [ ] 提示词的"关键文件路径速查"中包含业务文档的完整路径
- [ ] 提示词的"文件职责表"中包含业务文档的职责说明
- [ ] 业务文档的路径使用完整的绝对路径
- [ ] 业务文档的职责说明明确区分面向智能体和面向用户
