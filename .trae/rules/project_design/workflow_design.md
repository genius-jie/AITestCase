@workflow_type: project
@usage_mode: design
@enforcement: generate_only

# Workflow设计指南

## 1. Workflow类型定义

### 1.1 Structural（结构型）
- **文件位置**：workflows/
- **用途**：认知结构参考，辅助设计 agent 三件套
- **执行性**：❌ 不可执行
- **阶段**：Design Mode

### 1.2 Project（项目级）
- **文件位置**：project_design/
- **用途**：用于生成新 Agent / workflow / 文档
- **执行性**：⚠️ 条件执行
- **阶段**：Design / Bootstrap

### 1.3 Business（业务级）
- **文件位置**：agents/*/workflow.md
- **用途**：实际执行流程
- **执行性**：✅ 可执行
- **阶段**：Execution Mode

## 2. Workflow设计原则

### 2.1 清晰的阶段划分
- 每个 workflow 应分为清晰的阶段
- 每个阶段有明确的目标和输出
- 阶段之间的依赖关系明确

### 2.2 明确的输入输出
- 定义清晰的输入参数
- 定义明确的输出结果
- 输出格式标准化

### 2.3 可测试性
- 每个步骤可独立测试
- 支持断点续执行
- 输出结果可验证

### 2.4 可扩展性
- 支持添加新的步骤
- 支持调整步骤顺序
- 支持与其他 workflow 集成

## 3. Workflow文件格式规范

### 3.1 必须包含语义标签
```
@workflow_type: structural | project | business
@usage_mode: design | generation | execution
@enforcement: reference_only | generate_only | executable
```

### 3.2 清晰的标题结构
- 使用 Markdown 标题级别表示层级
- 每个阶段使用二级标题
- 每个步骤使用三级标题

### 3.3 详细的步骤描述
- 步骤名称清晰
- 步骤目标明确
- 步骤操作详细
- 步骤输出明确

### 3.4 示例
```markdown
@workflow_type: business
@usage_mode: execution
@enforcement: executable

# DDT测试数据管理工作流

## 阶段1: 需求分析

### 步骤1.1: 读取数据契约文档
- 操作：使用Read工具读取数据契约文档
- 输入：数据契约文档路径
- 输出：数据契约内容

### 步骤1.2: 分析测试维度
- 操作：从数据契约中提取测试维度
- 输入：数据契约内容
- 输出：测试维度列表

## 阶段2: 测试数据生成

### 步骤2.1: 生成测试数据
- 操作：根据测试维度生成测试数据
- 输入：测试维度列表
- 输出：测试数据CSV文件

### 步骤2.2: 验证测试数据
- 操作：验证测试数据的完整性和正确性
- 输入：测试数据CSV文件
- 输出：验证报告
```

## 4. Workflow设计流程

### 4.1 需求分析
- 明确 workflow 的目标和范围
- 确定 workflow 的类型和用途
- 分析输入和输出要求

### 4.2 阶段设计
- 划分 workflow 的主要阶段
- 定义每个阶段的目标和输出
- 确定阶段之间的依赖关系

### 4.3 步骤设计
- 设计每个阶段的具体步骤
- 定义每个步骤的操作和输出
- 确定步骤之间的执行顺序

### 4.4 格式规范
- 添加语义标签
- 按照规范组织文档结构
- 编写详细的步骤描述

### 4.5 验证测试
- 检查 workflow 的完整性
- 验证 workflow 的可执行性
- 测试 workflow 的实际效果

## 5. Workflow最佳实践

### 5.1 保持简洁
- 每个 workflow 只做一件事
- 避免不必要的步骤
- 保持步骤的独立性

### 5.2 清晰的命名
- workflow 名称反映其功能
- 阶段和步骤名称清晰易懂
- 避免使用模糊的术语

### 5.3 详细的文档
- 提供完整的说明文档
- 包含示例和使用指南
- 定期更新文档

### 5.4 版本控制
- 记录 workflow 的版本变化
- 支持回滚到 previous 版本
- 定期进行版本审核

## 6. Workflow设计检查清单

- [ ] 明确 workflow 类型和用途
- [ ] 添加了必要的语义标签
- [ ] 阶段划分清晰
- [ ] 步骤描述详细
- [ ] 输入输出定义明确
- [ ] 格式符合规范
- [ ] 可执行性验证通过
- [ ] 文档完整

---

**创建时间**：2026-01-14
**最后更新**：2026-01-14
