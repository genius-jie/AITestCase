@workflow_type: project
@usage_mode: design
@enforcement: generate_only

# Agent设计指南

## 1. Agent核心组成

每个业务Agent必须包含三件套：

1. **role.prompt.md** - Agent的身份和能力定义
2. **workflow.md** - Agent的执行流程
3. **mistakes.md** - Agent的错题本

## 2. Role Prompt设计

### 2.1 核心元素

#### 2.1.1 身份定义
- 清晰的角色定位
- 明确的专业领域
- 独特的能力特点

#### 2.1.2 目标与约束
- 明确的工作目标
- 严格的约束条件
- 清晰的边界定义

#### 2.1.3 核心能力
- 主要功能列表
- 技术栈要求
- 输出质量标准

#### 2.1.4 行为准则
- 工作流程规范
- 交互方式要求
- 问题处理机制

### 2.2 格式规范

```markdown
# Agent身份定义

## 核心角色
你是一位专业的[角色名称]，擅长[核心能力]。

## 特点
- 特点1
- 特点2
- 特点3

## 工作目标
- 目标1
- 目标2

## 约束条件
- 约束1
- 约束2

## 核心能力
- 能力1
- 能力2

## 行为准则
- 准则1
- 准则2
```

### 2.3 最佳实践

- 使用清晰、专业的语言
- 避免模糊的描述
- 保持简洁明了
- 突出核心能力
- 明确约束边界

## 3. Workflow设计

参见 [workflow_design.md](workflow_design.md)

## 4. Mistakes Notebook设计

### 4.1 核心元素

#### 4.1.1 基本信息
- 错误ID
- 错误日期
- 错误模块

#### 4.1.2 错误描述
- 错误现象
- 错误上下文
- 错误影响

#### 4.1.3 根因分析
- 直接原因
- 间接原因
- 根本原因

#### 4.1.4 解决方案
- 临时解决方案
- 永久解决方案
- 预防措施

#### 4.1.5 验证结果
- 验证方法
- 验证结果
- 验证日期

### 4.2 格式规范

```markdown
# Agent错题本

## 统计信息
- 总问题数：X
- 已解决数：Y
- 最后更新时间：YYYY-MM-DD

## 历史错误记录

### 错误1: [错误名称]

#### 基本信息
- 错误ID: ERR-YYYYMMDD-001
- 错误日期: YYYY-MM-DD
- 错误模块: [模块名称]

#### 错误描述
- 错误现象: [详细描述]
- 错误上下文: [上下文信息]
- 错误影响: [影响范围]

#### 根因分析
- 直接原因: [直接原因]
- 间接原因: [间接原因]
- 根本原因: [根本原因]

#### 解决方案
- 临时解决方案: [临时方案]
- 永久解决方案: [永久方案]
- 预防措施: [预防措施]

#### 验证结果
- 验证方法: [验证方法]
- 验证结果: [验证结果]
- 验证日期: YYYY-MM-DD
```

### 4.3 最佳实践

- 及时记录错误
- 详细描述错误场景
- 深入分析根本原因
- 提供有效的解决方案
- 定期回顾和更新

## 5. Agent设计流程

### 5.1 需求分析
- 明确Agent的目标和范围
- 分析Agent的核心能力需求
- 确定Agent的约束条件

### 5.2 角色设计
- 设计Agent的身份和特点
- 定义Agent的核心能力
- 制定Agent的行为准则

### 5.3 Workflow设计
- 设计Agent的执行流程
- 定义每个步骤的操作和输出
- 验证Workflow的可执行性

### 5.4 错题本设计
- 设计错题本的结构和格式
- 制定错题记录和更新规则
- 建立错题回顾机制

### 5.5 测试验证
- 测试Agent的角色定义
- 验证Workflow的执行效果
- 测试错题本的记录功能

## 6. Agent设计检查清单

- [ ] 身份定义清晰
- [ ] 核心能力明确
- [ ] 约束条件严格
- [ ] Workflow设计合理
- [ ] 错题本结构完整
- [ ] 格式符合规范
- [ ] 内容可执行

---

**创建时间**：2026-01-14
**最后更新**：2026-01-14
