# 提示词性能优化规则 ⚡

**核心目标**：提升智能体执行效率，减少不必要的思考时间和文档读取。

**5大性能优化原则**：

| 优化原则 | 具体要求 | 适用场景 |
| :--- | :--- | :--- |
| **1. 避免过度分析** | 对于明确的任务，直接执行，不反复确认 | 用户需求明确、参数完整 |
| **2. 减少文档读取** | 只在必要时才读取文档，不默认读取所有文档 | 简单任务、已有明确指令 |
| **3. 智能判断复杂度** | 根据任务复杂度决定是否创建todo list | 区分简单任务（≤2步）和复杂任务（≥3步） |
| **4. 快速失败** | 遇到错误立即返回，不尝试其他方法 | 文件不存在、命令执行失败 |
| **5. 并行处理** | 多个独立操作并行执行，减少等待时间 | 读取多个独立文件、执行多个独立命令 |

**详细说明**：

#### 1. 避免过度分析
- **禁止行为**：
  - ❌ 不要反复确认用户已明确的需求
  - ❌ 不要过度分析简单的任务
  - ❌ 不要在执行前进行过多的前置检查
- **推荐行为**：
  - ✅ 对于明确的任务，立即开始执行
  - ✅ 只做必要的验证，避免过度检查
  - ✅ 直接执行命令，不反复确认

#### 2. 减少文档读取
- **禁止行为**：
  - ❌ 不要默认读取所有相关文档
  - ❌ 不要重复读取用户已提供的文件
  - ❌ 不要在每次操作前都读取配置文档
- **推荐行为**：
  - ✅ 只在需要验证参数时才读取数据契约文档
  - ✅ 只在遇到问题时才读取业务文档
  - ✅ 优先使用提示词中的快速指引

#### 3. 智能判断复杂度
- **创建Todo List的场景**（任务复杂度≥3步）：
  - ✅ 需要生成多个CSV文件
  - ✅ 需要处理多个不同的业务场景
  - ✅ 任务涉及错误修复和重试
  - ✅ 需要多个阶段的完整工作流
- **不创建Todo List的场景**（任务复杂度≤2步）：
  - ❌ 用户直接提供CSV文件，只需执行生成命令
  - ❌ 简单的单场景语音生成
  - ❌ 已有CSV文件的批量生成

#### 4. 快速失败
- **错误处理原则**：
  - 如果CSV文件不存在，立即报错，不要尝试读取其他文档
  - 如果命令执行失败，立即返回错误信息，不要尝试其他方法
  - 如果遇到未知错误，记录到错题本，然后继续下一个任务
- **错误处理流程**：
  ```mermaid
  graph TD
      A[执行任务] --> B{成功?}
      B -->|是| C[返回结果]
      B -->|否| D{可快速修复?}
      D -->|是| E[修复并重试]
      D -->|否| F[记录到错题本]
      F --> G[返回错误信息]
      E --> A
  ```

#### 5. 并行处理
- **并行调用策略**：
  ```python
  # ✅ 推荐：并行读取多个独立文件
  Read(file_path="file1.csv")
  Read(file_path="file2.csv")
  Read(file_path="file3.csv")
  
  # ❌ 避免：串行读取文件
  Read(file_path="file1.csv")
  # 等待结果...
  Read(file_path="file2.csv")
  # 等待结果...
  ```
- **适用场景**：
  - 读取多个独立的CSV文件
  - 执行多个独立的命令
  - 读取多个独立的配置文件
