@workflow_type: structural
@usage_mode: execution
@enforcement: executable
@version: 1.0.0
@author: QA Team
@description: A3阶段工作流 - 任务拆分与资产整合
@created_at: 2026-01-14
@last_updated: 2026-01-14

# A3 Assemble - 任务拆分与资产整合

## 适用场景
- 接口测试任务拆分
- 测试资产整合
- 标准化测试资产库生成

## 核心目标
- 将测试架构拆解为可执行测试任务
- 形成标准化测试资产清单
- 输出测试任务拆分文档和标准化测试资产库

## 核心特点
- ✅ 基于A2输出进行任务拆分
- ✅ 形成标准化测试资产清单
- ✅ 完成数据策略最终决策
- ✅ 补全A3阶段三件套文档
- ✅ **响应业务规则变更，更新资产清单和数据策略**

## 阶段划分

### 阶段1: 任务拆分
@phase_id: A3-1
@role: 任务拆分Agent
@output: [测试任务清单]
@human_review: required
@metadata:
  core_objectives: 基于A2输出进行任务拆分
  key_nodes: 任务拆分审核节点
  references: stages/A2/output.md, 测试架构设计文档

#### 核心动作
1. 基于A2阶段测试架构设计，拆解为可执行测试任务
2. 明确任务的输入输出、依赖关系和负责人
3. 生成结构化测试任务清单

### 阶段2: 资产整合
@phase_id: A3-2
@role: 资产整合Agent
@output: [标准化测试资产库, 数据策略最终决策]
@human_review: required
@metadata:
  core_objectives: 整合测试资产，完成数据策略最终决策
  key_nodes: 资产整合审核节点
  references: 测试任务清单, A2阶段流程设计文档

#### 核心动作
1. 整合测试相关资产（需求文档、设计文档、测试用例等）
2. 分类存储资产，形成标准化资产库
3. **完成数据策略最终决策**
   - 生成数据来源决策表（CSV/动态/混合）
   - 输出CSV字段清单（如果需要）
   - 提供并发风险说明
   - 设计回退策略
4. **输出数据策略最终决策结果**
5. 建立资产索引和检索机制

### 阶段3: 文档标准化
@phase_id: A3-3
@role: 文档标准化Agent
@output: [标准化文档]
@human_review: optional
@metadata:
  core_objectives: 统一文档格式和命名规范
  key_nodes: 文档标准化审核节点
  references: 标准化测试资产库

#### 核心动作
1. 统一文档格式和命名规范
2. 确保文档内容完整、结构清晰
3. 输出标准化文档

### 阶段4: 阶段文档补全
@phase_id: A3-4
@role: 文档补全Agent
@output: [补全后的阶段三件套文档]
@human_review: optional
@metadata:
  core_objectives: 补全阶段三件套文档
  key_nodes: 文档审核节点
  references: 所有前期输出文档

#### 核心动作
1. 补全A3阶段workflow.md执行细节
2. 强化A3阶段role.prompt.md中的职责、能力与输出要求
3. 在mistakes.md中沉淀本阶段易错点
4. 输出完整的阶段三件套文档

### 阶段5: 业务规则变更响应（跨阶段流程）
@phase_id: A3-5
@role: 资产更新Agent
@output: [更新后的资产清单和数据策略]
@human_review: required
@upstream_phases: [A1, A2]
@depends_on: [CROSS-FLOW-001-1]
@cross_flow: CROSS-FLOW-001
@metadata:
  core_objectives: 响应业务规则变更，更新资产清单和数据策略
  key_nodes: 资产更新审核节点
  references: CROSS-FLOW-001, 业务规则变更影响分析报告

#### 核心动作
1. **分析业务规则变更影响**：
   - 识别变更的业务规则内容
   - 分析变更影响的测试任务和资产
   - 确定对数据策略的影响程度

2. **更新测试任务清单**：
   - 根据业务规则变更更新测试任务
   - 更新任务的输入输出、依赖关系
   - 更新任务优先级和执行顺序

3. **更新资产清单**：
   - 根据业务规则变更更新测试资产
   - 更新资产分类和索引
   - 确保资产与业务规则保持一致

4. **更新数据策略**：
   - 根据业务规则变更调整数据策略
   - 更新数据来源决策表
   - 调整CSV字段清单和回退策略

5. **输出更新后的文档**：
   - 更新后的测试任务清单
   - 更新后的资产清单
   - 更新后的数据策略
   - 变更历史记录

#### 更新原则
- **完整性原则**：所有受影响的资产和数据策略都必须更新
- **一致性原则**：更新后的资产和数据策略必须与业务规则保持一致
- **可追溯原则**：所有变更都必须记录变更原因、日期和影响范围
- **验证原则**：更新后必须验证资产和数据策略的正确性

#### 触发条件
- 业务规则文档发生变更
- 接口文档发生变更
- 测试需求发生变更
- 发现业务规则与实际实现不一致

#### 输出内容
- 变更内容摘要
- 影响的测试任务和资产
- 更新后的测试任务清单
- 更新后的资产清单
- 更新后的数据策略
- 变更历史记录

## 落地建议
- 文档先行：每个阶段启动前先生成对应节点工作流文档
- 保留人工入口：关键节点人工介入
- 可选使用 & 可组合使用：Agent可根据任务需求选择和覆盖模板
- 版本管理：记录版本变化

## Skill能力映射

### 核心Skill能力映射
- **JMeter 方法层设计**：用于任务拆分和方法设计，支持测试任务的拆解和方法封装
- **接口测试数据设计**：用于资产整合和数据策略最终决策，支持数据策略制定和验证
- **JMeter 组件层设计**：用于文档标准化和资产分类，支持资产的标准化和分类管理
- **JMeter 执行层设计**：用于资产验证和问题定位，支持资产质量验证和问题分析

### 阶段Skill映射
1. **A3-1: 任务拆分**
   - JMeter 方法层设计：测试任务拆分和方法设计
   - JMeter 执行层设计：执行策略和流程设计

2. **A3-2: 资产整合**
   - 接口测试数据设计：数据策略最终决策和数据设计
   - JMeter 组件层设计：资产分类和标准化

3. **A3-3: 文档标准化**
   - JMeter 组件层设计：文档结构和格式标准化
   - JMeter 方法层设计：文档内容完整性验证

4. **A3-4: 阶段文档补全**
   - JMeter 组件层设计：文档结构和格式标准化
   - 接口测试数据设计：文档内容完整性验证

5. **A3-5: 业务规则变更响应**
   - JMeter 执行层设计：变更影响分析和问题定位
   - 接口测试数据设计：业务规则变更数据策略调整

## 输出文件
- `4_测试任务拆分_接口测试.md`
- 标准化测试资产库

## 跨阶段依赖关系

### 上游依赖
- **A1阶段**：提供需求清单、业务规则、接口测试目标等基础输入
- **A2阶段**：提供测试架构设计文档、流程设计文档、Agent协同调度手册等核心输入

### 下游影响
- **A4阶段**：依赖A3阶段输出的测试任务清单和标准化测试资产库进行数据构造和工具适配
- **A5阶段**：依赖A3阶段输出的数据策略最终决策进行执行可达性验证和断言设计
- **A6阶段**：依赖A3阶段输出的资产清单进行结果汇总和多维度评估

### 并行协作
- **与A1-A2阶段**：在业务规则变更场景下，需要与A1-A2阶段并行协作，确保变更影响得到全面分析
- **与A4-A5阶段**：在数据策略执行过程中，需要与A4-A5阶段保持沟通，确保数据策略的正确执行

### 依赖传递路径
```
A1 → A2 → A3 → A4 → A5 → A6
```

### 关键依赖点
1. **A2→A3**：测试架构设计文档是任务拆分的基础
2. **A3→A4**：数据策略最终决策是数据构造的依据
3. **A3→A5**：标准化测试资产库是执行验证的参考
```