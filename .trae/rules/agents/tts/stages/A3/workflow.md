@workflow_type: reusable
@usage_mode: execution
@enforcement: optional
@phase_id: A3
@version: 1.0.0
@author: QA Team
@created_at: 2026-01-14
@last_updated: 2026-01-14

Assemble｜资产聚合与标准化
@phase_id: A3
@role: 文档整理Agent
@human_review: required
@upstream_phases: [A1, A2]

@goal:
- 将分散产物固化为“可复用、可版本化”的测试资产

@inputs:
- A1 输出文档：结构化需求清单（需求分析报告）
- A1 输出文档：需求澄清与验收标准（需求分析报告）
- A1 输出文档：测试维度规划（正常/异常/边界/鲁棒性）
- A1 输出文档：核心字段与非核心字段识别
- A2 输出文档：测试架构设计文档
- A2 输出文档：Agent 协同调度手册
- A2 输出文档：数据流设计（CSV数据→SSML生成→音频合成→VAD检测）
- A2 输出文档：执行流设计（测试数据准备→语音生成→VAD测试→结果分析）
- A2 输出文档：结果流设计（测试结果收集→失败分析→优化迭代）
- 语音生成数据契约文档.md - 数据规范和字段定义
- VAD测试数据设计与样本生成指南.md - 测试设计指南
- 知识库

@outputs:
- 测试任务拆分文档（按场景类型、优先级、执行顺序拆分）
- 标准化测试资产库（CSV数据模板、SSML模板、音频处理脚本）
- 标准化数据契约（字段定义、取值规则、约束条件）
- 测试场景分类清单（正常场景/异常场景/边界场景/鲁棒性场景）
- 测试任务优先级矩阵（P0/P1/P2优先级划分）
- 可复用资产清单
- 资产版本与变更记录

@validation_rules:
- 必须校验 A1 阶段已完成（三件套+结果文档）
- 必须校验 A2 阶段已完成（三件套+结果文档）
- 必须校验 A1 输出的需求分析报告已通过人工审核
- 必须校验 A2 输出的测试架构设计文档已完成

@execution_steps:
1. 收集所有执行资产：
   - CSV模板
   - SSML模板
   - 后期处理脚本（呼吸音、噪声处理）
2. 标注每个资产用途：
   - CSV模板 -> 数据构造
   - SSML模板 -> 数据构造
   - 后处理脚本 -> 测试执行
3. 检查资产完整性
4. 将资产路径和说明存入阶段文档
5. 输出资产清单，供A4使用
6. 准备Azure TTS环境，配置API Key、区域、语音名称
7. 编写生成脚本（Python）
   - 循环读取测试数据文本
   - 根据prosody_rate, prosody_pitch, prosody_volume生成SSML
   - 输出WAV音频到指定目录
8. 核查生成结果：
   - 音量、音高、语速是否符合预期
   - 文件命名规范是否正确
9. 输出基础语音文件列表

@skeleton:
  sections:
    - 可复用资产清单
    - 测试任务拆分结构
    - 资产版本与变更记录

---